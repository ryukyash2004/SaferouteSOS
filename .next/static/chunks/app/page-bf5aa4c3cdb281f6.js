(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{10:(e,t,a)=>{"use strict";a.d(t,{$v:()=>p,EO:()=>m,Lt:()=>i,Rx:()=>g,Zr:()=>y,ck:()=>x,r7:()=>f,tv:()=>d,wd:()=>h});var s=a(5155),r=a(2115),l=a(7649),n=a(9434),o=a(285);let i=l.bL,d=l.l9,c=l.ZL,u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.hJ,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:t})});u.displayName=l.hJ.displayName;let m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(u,{}),(0,s.jsx)(l.UC,{ref:t,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r})]})});m.displayName=l.UC.displayName;let h=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};h.displayName="AlertDialogHeader";let x=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};x.displayName="AlertDialogFooter";let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.hE,{ref:t,className:(0,n.cn)("text-lg font-semibold",a),...r})});f.displayName=l.hE.displayName;let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.VY,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})});p.displayName=l.VY.displayName;let g=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.rc,{ref:t,className:(0,n.cn)((0,o.r)(),a),...r})});g.displayName=l.rc.displayName;let y=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.ZD,{ref:t,className:(0,n.cn)((0,o.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...r})});y.displayName=l.ZD.displayName},172:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(157).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},285:(e,t,a)=>{"use strict";a.d(t,{$:()=>d,r:()=>i});var s=a(5155),r=a(2115),l=a(9708),n=a(2085),o=a(9434);let i=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:a,variant:r,size:n,asChild:d=!1,...c}=e,u=d?l.DX:"button";return(0,s.jsx)(u,{className:(0,o.cn)(i({variant:r,size:n,className:a})),ref:t,...c})});d.displayName="Button"},286:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(157).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},960:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(157).A)("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]])},1660:(e,t,a)=>{"use strict";a.d(t,{CI:()=>o,IP:()=>n,MO:()=>i,kK:()=>r});let s="saferouteSOS_emergencyContacts",r=()=>{let e=localStorage.getItem(s);return e?JSON.parse(e):[]},l=e=>{localStorage.setItem(s,JSON.stringify(e))},n=e=>{let t=r(),a={...e,id:Date.now().toString()};return l([...t,a]),a},o=e=>{l(r().map(t=>t.id===e.id?e:t))},i=e=>{l(r().filter(t=>t.id!==e))}},1949:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(157).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},2751:(e,t,a)=>{Promise.resolve().then(a.bind(a,7683))},2983:(e,t,a)=>{"use strict";a.d(t,{M1:()=>r,Z2:()=>n,en:()=>l});let s="saferouteSOS_routeHistory",r=()=>{let e=localStorage.getItem(s);return e?JSON.parse(e):[]},l=e=>{let t=r(),a={...e,timestamp:Date.now()},l=[a,...t];return localStorage.setItem(s,JSON.stringify(l)),a},n=()=>{localStorage.removeItem(s)}},6695:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>i,Zp:()=>n,aR:()=>o,wL:()=>u});var s=a(5155),r=a(2115),l=a(9434);let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});n.displayName="Card";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...r})});o.displayName="CardHeader";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});i.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",a),...r})});u.displayName="CardFooter"},7312:(e,t,a)=>{"use strict";a.d(t,{m:()=>r});var s=a(2115);function r(){let[e,t]=(0,s.useState)({location:null,error:null,loading:!0}),a=(0,s.useCallback)(()=>{if(!navigator.geolocation){t(e=>({...e,error:"Geolocation is not supported by your browser",loading:!1}));return}t(e=>({...e,loading:!0,error:null})),navigator.geolocation.getCurrentPosition(e=>{t({location:{latitude:e.coords.latitude,longitude:e.coords.longitude,timestamp:e.timestamp},error:null,loading:!1})},e=>{t(t=>({...t,error:e.message,loading:!1}))})},[]);return(0,s.useEffect)(()=>{t(e=>({...e,loading:!1}))},[a]),{...e,getLocation:a}}},7481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>m});var s=a(2115);let r=0,l=new Map,n=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?n(a):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],d={toasts:[]};function c(e){d=o(d,e),i.forEach(e=>{e(d)})}function u(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function m(){let[e,t]=s.useState(d);return s.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},7683:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var s=a(5155),r=a(2115),l=a(6874),n=a.n(l),o=a(6695),i=a(285),d=a(172),c=a(157);let u=(0,c.A)("Siren",[["path",{d:"M7 18v-6a5 5 0 1 1 10 0v6",key:"pcx96s"}],["path",{d:"M5 21a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-1a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2z",key:"1b4s83"}],["path",{d:"M21 12h1",key:"jtio3y"}],["path",{d:"M18.5 4.5 18 5",key:"g5sp9y"}],["path",{d:"M2 12h1",key:"1uaihz"}],["path",{d:"M12 2v1",key:"11qlp1"}],["path",{d:"m4.929 4.929.707.707",key:"1i51kw"}],["path",{d:"M12 12v6",key:"3ahymv"}]]);var m=a(1949),h=a(7481),x=a(7312),f=a(1660),p=a(2983),g=a(10);function y(){let{toast:e}=(0,h.dj)(),{location:t,error:a,loading:l,getLocation:n}=(0,x.m)(),[o,c]=(0,r.useState)(!1),y=async()=>{c(!0),n()};return(0,r.useState)(()=>{if(o&&!l){if(a){e({variant:"destructive",title:"SOS Failed",description:"Could not get location: ".concat(a,". Please enable location services.")}),c(!1);return}if(t){let a=(0,f.kK)();if(0===a.length){e({variant:"destructive",title:"SOS Failed",description:"No emergency contacts configured. Please add contacts first."}),c(!1);return}console.log("SOS Alert:",{message:"Emergency SOS! My current location is:",latitude:t.latitude,longitude:t.longitude,timestamp:new Date(t.timestamp).toLocaleString(),contacts:a.map(e=>({name:e.name,phone:e.phone,email:e.email}))}),(0,p.en)({latitude:t.latitude,longitude:t.longitude}),e({title:"SOS Alert Sent!",description:"Alert sent to ".concat(a.length," contact(s) with your current location. (Simulated)")})}c(!1)}},[t,a,l,o,e]),(0,s.jsxs)(g.Lt,{children:[(0,s.jsx)(g.tv,{asChild:!0,children:(0,s.jsxs)(i.$,{variant:"destructive",size:"lg",className:"w-full md:w-auto h-16 text-xl shadow-lg hover:shadow-xl transition-shadow duration-300 animate-pulse hover:animate-none",disabled:o||l,children:[o||l?(0,s.jsx)(d.A,{className:"mr-2 h-6 w-6 animate-spin"}):(0,s.jsx)(u,{className:"mr-2 h-6 w-6"}),"SEND SOS"]})}),(0,s.jsxs)(g.EO,{children:[(0,s.jsxs)(g.wd,{children:[(0,s.jsxs)(g.r7,{className:"flex items-center",children:[(0,s.jsx)(m.A,{className:"mr-2 h-6 w-6 text-destructive"}),"Confirm SOS Activation"]}),(0,s.jsx)(g.$v,{children:"This will immediately send an alert with your current location to all your emergency contacts. Are you sure you want to proceed?"})]}),(0,s.jsxs)(g.ck,{children:[(0,s.jsx)(g.Zr,{children:"Cancel"}),(0,s.jsx)(g.Rx,{onClick:y,className:"bg-destructive hover:bg-destructive/90",children:"Yes, Send SOS"})]})]})]})}var v=a(3662);let N=(0,c.A)("BellRing",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]]);var j=a(286);let w=(0,c.A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var S=a(960);function b(){let[e,t]=(0,r.useState)(0),{location:a,error:l,loading:d,getLocation:c}=(0,x.m)(),{toast:u}=(0,h.dj)();return(0,r.useEffect)(()=>{t((0,f.kK)().length),c()},[]),(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)(o.Zp,{className:"shadow-lg",children:[(0,s.jsxs)(o.aR,{children:[(0,s.jsx)(o.ZB,{className:"text-3xl font-bold text-center text-primary",children:"Stay Safe"}),(0,s.jsx)(o.BT,{className:"text-center text-lg",children:"Your personal safety companion. In case of emergency, press the SOS button below."})]}),(0,s.jsxs)(o.Wu,{className:"flex flex-col items-center space-y-6",children:[(0,s.jsx)(y,{}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"This will alert your emergency contacts with your current location."})]})]}),(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[(0,s.jsxs)(o.Zp,{children:[(0,s.jsxs)(o.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(o.ZB,{className:"text-sm font-medium",children:"Current Location"}),(0,s.jsx)(v.A,{className:"h-5 w-5 text-muted-foreground"})]}),(0,s.jsxs)(o.Wu,{children:[d&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Fetching location..."}),l&&(0,s.jsxs)("p",{className:"text-sm text-destructive",children:["Error: ",l]}),a&&!l&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:"Location Acquired"}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Lat: ",a.latitude.toFixed(4),", Lon: ",a.longitude.toFixed(4)]})]}),!a&&!l&&!d&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Location not available. Enable GPS."}),(0,s.jsxs)(i.$,{variant:"outline",size:"sm",className:"mt-4 w-full",onClick:()=>{c(),a&&!l?((0,p.en)({latitude:a.latitude,longitude:a.longitude}),u({title:"Checked In!",description:"Your current location has been logged to your route history."})):l&&u({variant:"destructive",title:"Check-in Failed",description:"Could not get location: ".concat(l)})},disabled:d,children:[(0,s.jsx)(N,{className:"mr-2 h-4 w-4"})," Log My Location (Check-in)"]})]})]}),(0,s.jsxs)(o.Zp,{children:[(0,s.jsxs)(o.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(o.ZB,{className:"text-sm font-medium",children:"Emergency Contacts"}),(0,s.jsx)(j.A,{className:"h-5 w-5 text-muted-foreground"})]}),(0,s.jsxs)(o.Wu,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:e}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:1===e?"contact configured":"contacts configured"}),(0,s.jsx)(i.$,{asChild:!0,variant:"link",className:"px-0 mt-2",children:(0,s.jsxs)(n(),{href:"/contacts",children:["Manage Contacts ",(0,s.jsx)(w,{className:"ml-1 h-4 w-4"})]})})]})]}),(0,s.jsxs)(o.Zp,{children:[(0,s.jsxs)(o.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(o.ZB,{className:"text-sm font-medium",children:"Route History"}),(0,s.jsx)(S.A,{className:"h-5 w-5 text-muted-foreground"})]}),(0,s.jsxs)(o.Wu,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:"View Logs"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Check your timestamped location records."}),(0,s.jsx)(i.$,{asChild:!0,variant:"link",className:"px-0 mt-2",children:(0,s.jsxs)(n(),{href:"/history",children:["View History ",(0,s.jsx)(w,{className:"ml-1 h-4 w-4"})]})})]})]})]})]})}},9434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var s=a(2596),r=a(9688);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[668,890,141,649,441,684,358],()=>t(2751)),_N_E=e.O()}]);